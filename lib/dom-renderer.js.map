{"version":3,"sources":["../src/dom-renderer.js"],"names":[],"mappings":"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","file":"dom-renderer.js","sourcesContent":["import utils from \"./utils\";\nimport Renderer from \"./renderer\";\n\nconst DOMRenderer = function(boardElement, { hooks, options }) {\n  Renderer.call(this, boardElement, { hooks: hooks, options: options });\n\n  if (this.smallerStones) {\n    utils.addClass(boardElement, \"tenuki-smaller-stones\");\n  }\n\n  utils.addClass(boardElement, \"tenuki-dom-renderer\");\n};\n\nDOMRenderer.prototype = Object.create(Renderer.prototype);\nDOMRenderer.prototype.constructor = DOMRenderer;\n\nDOMRenderer.prototype._setup = function(boardState) {\n  Renderer.prototype._setup.call(this, boardState);\n\n  this.BOARD_LENGTH += 1;\n  this.computeSizing();\n};\n\nDOMRenderer.prototype.generateBoard = function(boardState) {\n  const contentsContainer = utils.createElement(\"div\");\n\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"lines horizontal\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"lines vertical\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"hoshi-points\" }));\n  utils.appendElement(contentsContainer, utils.createElement(\"div\", { class: \"intersections\" }));\n\n  Renderer.hoshiPositionsFor(boardState.boardSize).forEach(h => {\n    const hoshi = utils.createElement(\"div\", { class: \"hoshi\" });\n    hoshi.style.left = (h.left * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n    hoshi.style.top = (h.top * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n    utils.appendElement(contentsContainer.querySelector(\".hoshi-points\"), hoshi);\n  });\n\n  for (let y = 0; y < boardState.boardSize; y++) {\n    const horizontalLine = utils.createElement(\"div\", { class: \"line horizontal\" });\n    horizontalLine.setAttribute(\"data-left-gutter\", boardState.yCoordinateFor(y));\n    utils.appendElement(contentsContainer.querySelector(\".lines.horizontal\"), horizontalLine);\n\n    const verticalLine = utils.createElement(\"div\", { class: \"line vertical\" });\n    verticalLine.setAttribute(\"data-top-gutter\", boardState.xCoordinateFor(y));\n    utils.appendElement(contentsContainer.querySelector(\".lines.vertical\"), verticalLine);\n\n    for (let x = 0; x < boardState.boardSize; x++) {\n      const intersectionElement = utils.createElement(\"div\", { class: \"intersection empty\" });\n      const stoneElement = utils.createElement(\"div\", { class: \"stone\" });\n      utils.appendElement(intersectionElement, stoneElement);\n\n      intersectionElement.setAttribute(\"data-position-x\", x);\n      intersectionElement.setAttribute(\"data-position-y\", y);\n\n      intersectionElement.style.left = (x * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n      intersectionElement.style.top = (y * (this.INTERSECTION_GAP_SIZE + 1)) + \"px\";\n\n      utils.appendElement(contentsContainer.querySelector(\".intersections\"), intersectionElement);\n\n      this.grid[y] = this.grid[y] || [];\n      this.grid[y][x] = intersectionElement;\n\n      this.addIntersectionEventListeners(intersectionElement, y, x);\n    }\n  }\n\n  // prevent the text-selection cursor\n  utils.addEventListener(contentsContainer.querySelector(\".lines.horizontal\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n  utils.addEventListener(contentsContainer.querySelector(\".lines.vertical\"), \"mousedown\", function(e) {\n    e.preventDefault();\n  });\n\n  contentsContainer.querySelector(\".lines.horizontal\").style.width = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.horizontal\").style.height = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.vertical\").style.width = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n  contentsContainer.querySelector(\".lines.vertical\").style.height = ((this.INTERSECTION_GAP_SIZE * (boardState.boardSize - 1)) + boardState.boardSize) + \"px\";\n\n  return contentsContainer;\n};\n\nDOMRenderer.prototype.setIntersectionClasses = function(intersectionEl, intersection, classes) {\n  if (intersectionEl.className !== classes.join(\" \")) {\n    intersectionEl.className = classes.join(\" \");\n  }\n};\n\nexport default DOMRenderer;\n"]}