{"version":3,"sources":["../src/client.js"],"names":[],"mappings":"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","file":"client.js","sourcesContent":["import Game from \"./game\";\n\nconst Client = function(options = {}) {\n  this._boardElement = options[\"element\"];\n  this._setup(options);\n};\n\nClient.prototype = {\n  _setup: function({ player, gameOptions={}, hooks }) {\n    this._player = player;\n    this._hooks = hooks;\n\n    if (this._player !== \"black\" && this._player !== \"white\" && this._player !== \"observer\") {\n      throw new Error(\"Player must be either black or white, but was given: \" + this._player);\n    }\n\n    gameOptions[\"_hooks\"] = {\n      handleClick: (y, x) => {\n        if (this._busy) {\n          return;\n        }\n\n        this._busy = true;\n\n        if (this.isOver()) {\n          const stonesToBeMarkedDead = this._game.currentState().groupAt(y, x).map(i => {\n            return {\n              y: i.y,\n              x: i.x,\n              color: i.color\n            };\n          });\n\n          this._hooks.submitMarkDeadAt(y, x, stonesToBeMarkedDead, result => {\n            if (result) {\n              this._game.toggleDeadAt(y, x);\n            }\n\n            this._busy = false;\n          });\n        } else {\n          if (this._player !== this.currentPlayer() || this._game.isIllegalAt(y, x)) {\n            this._busy = false;\n\n            return;\n          }\n\n          this._hooks.submitPlay(y, x, result => {\n            if (result) {\n              this._game.playAt(y, x);\n            }\n\n            this._busy = false;\n          });\n        }\n      },\n\n      hoverValue: (y, x) => {\n        if (!this._busy && this._player === this.currentPlayer() && !this.isOver() && !this._game.isIllegalAt(y, x)) {\n          return this._player;\n        }\n      },\n\n      gameIsOver: () => {\n        return this.isOver();\n      }\n    };\n\n    if (this._boardElement) {\n      this._game = new Game(Object.assign({ element: this._boardElement }, gameOptions));\n    } else {\n      this._game = new Game(...gameOptions);\n    }\n  },\n\n  isOver: function() {\n    return this._game.isOver();\n  },\n\n  currentPlayer: function() {\n    return this._game.currentPlayer();\n  },\n\n  receivePlay: function(y, x) {\n    if (this._player === this.currentPlayer()) {\n      return;\n    }\n\n    this._game.playAt(y, x);\n  },\n\n  moveNumber: function() {\n    return this._game.moveNumber();\n  },\n\n  receivePass: function() {\n    if (this._player === this.currentPlayer()) {\n      return;\n    }\n\n    this._game.pass();\n  },\n\n  receiveMarkDeadAt: function(y, x) {\n    this._game.toggleDeadAt(y, x);\n  },\n\n  deadStones: function() {\n    return this._game.deadStones();\n  },\n\n  setDeadStones: function(points) {\n    this._game._deadPoints = points.map(i => {\n      return {\n        y: i.y,\n        x: i.x\n      };\n    });\n\n    this._game.render();\n  },\n\n  pass: function() {\n    if (this._busy || this._player !== this.currentPlayer() || this.isOver()) {\n      return;\n    }\n\n    this._busy = true;\n\n    this._hooks.submitPass(result => {\n      if (result) {\n        this._game.pass();\n      }\n\n      this._busy = false;\n    });\n  }\n};\n\nexport default Client;\n"]}